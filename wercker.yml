box: buildpack-deps:stretch-scm

build:
  steps:
    - script:
        name: install elixir
        code: |
          source /dev/stdin <<< "$(curl -sSL https://raw.githubusercontent.com/codeship/scripts/master/languages/erlang.sh)"

    - script:
        name: set env vars
        code: |
          export MIX_ENV=test

    - script:
        name: test
        code: |
          cd $WERCKER_SOURCE_DIR
          make compile && rm -rf .git && make test
